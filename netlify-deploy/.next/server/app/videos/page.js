(()=>{var e={};e.id=55,e.ids=[55],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},89807:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var s=r(50482),a=r(69108),l=r(62563),i=r.n(l),o=r(68300),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(t,n);let c=["",{children:["videos",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,32560)),"/Users/twain/Bluum/BLUUM 1.2/Bluum_1.2/app/videos/page.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,40816)),"/Users/twain/Bluum/BLUUM 1.2/Bluum_1.2/app/videos/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,60742)),"/Users/twain/Bluum/BLUUM 1.2/Bluum_1.2/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,20429)),"/Users/twain/Bluum/BLUUM 1.2/Bluum_1.2/app/error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,87984)),"/Users/twain/Bluum/BLUUM 1.2/Bluum_1.2/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,66542)),"/Users/twain/Bluum/BLUUM 1.2/Bluum_1.2/app/not-found.tsx"]}],d=["/Users/twain/Bluum/BLUUM 1.2/Bluum_1.2/app/videos/page.tsx"],u="/videos/page",x={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/videos/page",pathname:"/videos",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},23797:(e,t,r)=>{Promise.resolve().then(r.bind(r,87606))},87606:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(95344),a=r(97075);let l=(0,a.Z)("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),i=(0,a.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),o=(0,a.Z)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),n=(0,a.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var c=r(38271),d=r(88209),u=r(8428),x=r(76384),h=r(3729),p=r(41664),m=r(44669);function g(){(0,u.useRouter)();let{videos:e,removeVideo:t,clearExpiredVideos:r,selectedVideos:a,toggleVideoSelection:g,selectAllVideos:f,deselectAllVideos:v,removeSelectedVideos:b,getSelectedVideoPaths:y}=(0,x.J)(),[w,j]=(0,h.useState)(!1),[k,N]=(0,h.useState)(!1);(0,h.useEffect)(()=>{r(),j(!0)},[r]);let $=async e=>{try{let t=e.includes("supabase.co")||e.includes("supabase.in")||e.startsWith("http")?e:e.startsWith("/")?e:`/${e}`,r=await fetch(t);if(!r.ok)throw Error("Failed to download video");let s=await r.blob(),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a;let i=e.split("/").pop()||"video.mp4";l.download=i,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}catch(e){console.error("Error downloading video:",e),m.default.error("\xc9chec du t\xe9l\xe9chargement. Veuillez r\xe9essayer.")}},P=async()=>{try{if(0===a.length){m.default.error("Veuillez s\xe9lectionner au moins une vid\xe9o");return}N(!0),m.default.loading("Pr\xe9paration du t\xe9l\xe9chargement...");let e=y();if(console.log("Lancement du t\xe9l\xe9chargement ZIP pour",e.length,"vid\xe9os"),0===e.length)throw Error("Aucune vid\xe9o s\xe9lectionn\xe9e \xe0 t\xe9l\xe9charger");let t=!1;if(e.forEach((e,r)=>{e.path||(console.error(`Vid\xe9o ${r} a un chemin invalide:`,e),t=!0)}),t)throw Error("Certaines vid\xe9os ont des chemins invalides");await (0,p.V)(e,"bluum_videos.zip"),m.default.dismiss(),m.default.success(`${e.length} vid\xe9os t\xe9l\xe9charg\xe9es avec succ\xe8s`)}catch(t){console.error("Erreur d\xe9taill\xe9e lors du t\xe9l\xe9chargement des vid\xe9os:",t),m.default.dismiss();let e=t instanceof Error?t.message:"Erreur inconnue";m.default.error(`\xc9chec du t\xe9l\xe9chargement: ${e}`)}finally{N(!1)}},U=e=>{let t=e-Date.now();if(t<=0)return"Expir\xe9";if(t<36e5){let e=Math.floor(t/6e4),r=Math.floor(t%6e4/1e3);return 0===e?`${r}s`:`${e}m ${r}s`}return`${Math.floor(t/36e5)}h ${Math.floor(t%36e5/6e4)}m`};return w?s.jsx("div",{className:"p-6 xl:p-8 w-full h-[calc(100vh-65px)]",children:e.length>0?(0,s.jsxs)("div",{className:"w-full max-w-4xl mx-auto",children:[s.jsx("div",{className:"flex justify-center mb-4",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center",children:[s.jsx("button",{onClick:()=>{a.length===e.length?v():f()},className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-[#fafafa] dark:bg-[#0a0a0c] dark:text-white border dark:border-[#0a0a0c] rounded-lg hover:bg-gray-50 dark:hover:bg-[#0a0a0c]/80",children:a.length===e.length?(0,s.jsxs)(s.Fragment,{children:[s.jsx(l,{className:"w-4 h-4"}),"Deselect All"]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(i,{className:"w-4 h-4"}),"Select All"]})}),a.length>0&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("button",{onClick:P,disabled:k,className:`flex items-center gap-2 px-3 py-1.5 text-sm bg-[#fafafa] dark:bg-[#0a0a0c] dark:text-white border dark:border-[#0a0a0c] rounded-lg hover:bg-gray-50 dark:hover:bg-[#0a0a0c]/80 ${k?"opacity-50 cursor-not-allowed":""}`,children:k?(0,s.jsxs)(s.Fragment,{children:[s.jsx(o,{className:"w-4 h-4 animate-spin"}),"T\xe9l\xe9chargement..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(n,{className:"w-4 h-4"}),"T\xe9l\xe9charger (",a.length,")"]})}),(0,s.jsxs)("button",{onClick:()=>{if(0===a.length){m.default.error("Veuillez s\xe9lectionner au moins une vid\xe9o");return}let e=a.length;b(),m.default.success(`${e} vid\xe9os supprim\xe9es`)},disabled:k,className:`flex items-center gap-2 px-3 py-1.5 text-sm bg-[#fafafa] dark:bg-[#0a0a0c] text-red-500 border dark:border-[#0a0a0c] rounded-lg hover:bg-gray-50 dark:hover:bg-[#0a0a0c]/80 ${k?"opacity-50 cursor-not-allowed":""}`,children:[s.jsx(c.Z,{className:"w-4 h-4"}),"Supprimer (",a.length,")"]})]})]})}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-4",children:e.map(e=>(0,s.jsxs)("div",{className:"relative bg-white dark:bg-[#0a0a0c] rounded-3xl overflow-hidden hover:shadow-lg transition-shadow",children:[(0,s.jsxs)("div",{className:"aspect-video relative bg-gray-100 dark:bg-[#18181A]",children:[s.jsx("video",{src:e.path,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("input",{type:"checkbox",checked:a.includes(e.id),onChange:()=>g(e.id),className:"absolute top-2 left-2 h-4 w-4 rounded border-gray-300 text-[#5564ff] focus:ring-[#5564ff]"})})]}),s.jsx("div",{className:"p-3",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium mb-1 truncate dark:text-white",children:["Vid\xe9o ",e.id]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground dark:text-gray-300 mb-2",children:["Expire dans ",U(e.expiresAt)]})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>$(e.path),className:"p-1 text-[#5564ff] hover:bg-[#5564ff]/10 rounded-md transition-colors",title:"T\xe9l\xe9charger la vid\xe9o",children:s.jsx(n,{className:"w-3 h-3"})}),s.jsx("button",{onClick:()=>t(e.id),className:"p-1 text-red-500 hover:bg-red-500/10 rounded-md transition-colors",title:"Supprimer la vid\xe9o",children:s.jsx(c.Z,{className:"w-3 h-3"})})]})]})})]},e.id))})]}):s.jsx("div",{className:"flex items-center justify-center h-full w-full",children:s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"mb-6",children:s.jsx(d.Z,{className:"w-16 h-16 text-gray-400 dark:text-gray-500"})}),s.jsx("h2",{className:"text-2xl font-semibold mb-4 dark:text-white",children:"You have no videos"}),s.jsx("p",{className:"text-muted-foreground dark:text-gray-300",children:"Visit the Create page to make your first video."})]})})})}):null}},38271:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(97075).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},41664:(e,t,r)=>{"use strict";r.d(t,{V:()=>i});var s=r(29554),a=r.n(s),l=r(48938);async function i(e,t="bluum_videos.zip"){if(!e||0===e.length){console.error("Aucune vid\xe9o \xe0 t\xe9l\xe9charger");return}console.log(`D\xe9but du processus de t\xe9l\xe9chargement pour ${e.length} vid\xe9os`),console.log("Vid\xe9os \xe0 t\xe9l\xe9charger:",e);try{if(!a())throw Error("JSZip n'est pas disponible");if(!l.saveAs)throw Error("saveAs n'est pas disponible");let r=new(a());console.log("Instance JSZip cr\xe9\xe9e");let s=0,i=e.length,o=r.folder("videos");if(!o)throw Error("Impossible de cr\xe9er le dossier dans le ZIP");console.log('Dossier "videos" cr\xe9\xe9 dans le ZIP');let n=e.map(async(e,t)=>{try{console.log(`T\xe9l\xe9chargement de la vid\xe9o ${t+1}/${i}: ${e.fileName} depuis ${e.path}`);let r=await fetch(e.path);if(!r.ok)throw Error(`\xc9chec du t\xe9l\xe9chargement de la vid\xe9o ${e.fileName}: ${r.status} ${r.statusText}`);console.log(`Vid\xe9o ${t+1} r\xe9cup\xe9r\xe9e avec succ\xe8s, conversion en blob...`);let a=await r.blob();console.log(`Taille du blob pour ${e.fileName}: ${a.size} octets`);let l=function(e,t){let r=e.lastIndexOf("."),s=r>0?e.substring(0,r):e,a=r>0?e.substring(r):"";return`${s}_${t+1}${a}`}(e.fileName,t);o.file(l,a),s++,console.log(`T\xe9l\xe9chargement ${s}/${i}: ${e.fileName} ajout\xe9 au ZIP`)}catch(t){console.error(`Erreur lors du t\xe9l\xe9chargement de ${e.fileName}:`,t)}});if(console.log("Attente de tous les t\xe9l\xe9chargements..."),await Promise.all(n),0===s)throw Error("Aucune vid\xe9o n'a pu \xeatre t\xe9l\xe9charg\xe9e");console.log("G\xe9n\xe9ration du fichier ZIP...");let c=await r.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:5}});console.log(`ZIP g\xe9n\xe9r\xe9 avec succ\xe8s, taille: ${c.size} octets. T\xe9l\xe9chargement...`),(0,l.saveAs)(c,t),console.log("T\xe9l\xe9chargement du ZIP lanc\xe9")}catch(e){throw console.error("Erreur d\xe9taill\xe9e lors de la cr\xe9ation du ZIP:",e),e}}},40816:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(25036),a=r(67874);function l(){return s.jsx(a.T,{})}},32560:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>i});let s=(0,r(86843).createProxy)(String.raw`/Users/twain/Bluum/BLUUM 1.2/Bluum_1.2/app/videos/page.tsx`),{__esModule:a,$$typeof:l}=s,i=s.default}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,497,22,96],()=>r(89807));module.exports=s})();